{"ast":null,"code":"// src/App.js\nimport React,{createContext,useState}from\"react\";import'./App.css';import ClientPanel from\"./pages/ClientPanel\";import AdminPanel from\"./pages/AdminPanel\";import Registration from\"./pages/Registration\";import{createBrowserRouter,RouterProvider}from\"react-router-dom\";import LoginForm from\"./pages/LoginPage\";import{useEffect}from\"react\";import Root from\"./components/Root\";import History from\"./components/History\";import{jsx as _jsx}from\"react/jsx-runtime\";if('ontouchstart'in window){document.body.style='0';}const router=createBrowserRouter([{path:\"/\",element:/*#__PURE__*/_jsx(LoginForm,{})},{path:\"/register\",element:/*#__PURE__*/_jsx(Registration,{})},{path:\"/admin\",element:/*#__PURE__*/_jsx(AdminPanel,{})},{path:\"/client\",element:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Root,{})}),children:[{path:'',element:/*#__PURE__*/_jsx(ClientPanel,{})},{path:'history',element:/*#__PURE__*/_jsx(History,{})}]}]);export const UserId=/*#__PURE__*/createContext({});function App(){const[user,setUser]=useState({id:null,token:null});const[isLoading,setIsLoading]=useState(true);// Состояние для загрузки\nconst setAuth=value=>{setIsLoading(true);setUser(value);if(value){localStorage.setItem('user',JSON.stringify(value));}else{localStorage.removeItem('user');}setIsLoading(false);};useEffect(()=>{setIsLoading(true);const storedUser=JSON.parse(localStorage.getItem('user'));if(storedUser){setUser(storedUser);}setIsLoading(false);},[]);if(isLoading){return/*#__PURE__*/_jsx(\"div\",{children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"});// Здесь можно заменить на компоненты загрузки\n}return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(UserId.Provider,{value:{user,setAuth},children:/*#__PURE__*/_jsx(RouterProvider,{router:router})})});}export default App;","map":{"version":3,"names":["React","createContext","useState","ClientPanel","AdminPanel","Registration","createBrowserRouter","RouterProvider","LoginForm","useEffect","Root","History","jsx","_jsx","window","document","body","style","router","path","element","children","UserId","App","user","setUser","id","token","isLoading","setIsLoading","setAuth","value","localStorage","setItem","JSON","stringify","removeItem","storedUser","parse","getItem","className","Provider"],"sources":["C:/Users/kir/WebstormProjects/childout/src/App.js"],"sourcesContent":["// src/App.js\nimport React, { createContext, useState } from \"react\";\nimport './App.css';\nimport ClientPanel from \"./pages/ClientPanel\";\nimport AdminPanel from \"./pages/AdminPanel\";\nimport Registration from \"./pages/Registration\";\nimport {createBrowserRouter, RouterProvider} from \"react-router-dom\";\nimport LoginForm from \"./pages/LoginPage\";\nimport {useEffect} from \"react\";\nimport Root from \"./components/Root\";\n\nimport History from \"./components/History\";\nif ('ontouchstart' in window) {\n    document.body.style = '0';\n}\nconst router = createBrowserRouter([\n    { path: \"/\", element: <LoginForm/> },\n    { path: \"/register\", element: <Registration /> },\n    {\n        path: \"/admin\",\n        element: (\n                <AdminPanel />\n        )\n    },\n    {\n        path: \"/client\",\n        element: (\n                <div>\n                    <Root/>\n                </div>\n        ),\n        children:[{\n            path: '',\n            element: <ClientPanel/>\n            },\n            {\n                path:'history',\n                element: <History/>\n            },\n]\n\n\n    }\n]);\n\nexport const UserId = createContext({});\n\nfunction App() {\n\n    const [user, setUser] = useState({\n        id: null,\n        token: null,\n    });\n    const [isLoading, setIsLoading] = useState(true); // Состояние для загрузки\n    const setAuth = (value) => {\n        setIsLoading(true);\n        setUser(value);\n        if (value) {\n            localStorage.setItem('user', JSON.stringify(value));\n        } else {\n            localStorage.removeItem('user');\n        }\n        setIsLoading(false);\n    };\n\n    useEffect(() => {\n        setIsLoading(true)\n        const storedUser = JSON.parse(localStorage.getItem('user'));\n        if (storedUser) {\n            setUser(storedUser);\n        }\n        setIsLoading(false);\n    }, []);\n    if (isLoading) {\n        return <div>Загрузка...</div>; // Здесь можно заменить на компоненты загрузки\n    }\n    return (\n        <div className=\"App\">\n            <UserId.Provider value={{ user, setAuth }}>\n                {<RouterProvider router={router} />}\n            </UserId.Provider>\n        </div>\n    );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
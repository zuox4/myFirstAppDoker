{"ast":null,"code":"import React,{useContext,useState}from\"react\";import'./LoginPage.css';import{login}from\"./services/authService\";import logo1298 from'../assets/logo1298.svg';import{useNavigate}from\"react-router-dom\";import axios from\"axios\";import{UserId}from\"../App\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function LoginForm(){const navigate=useNavigate();const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const{setAuth}=useContext(UserId);const handleSubmit=async e=>{e.preventDefault();try{const data=await login(email,password);if(data.user){setAuth({id:data.user.id,token:data.user.access_token});console.log(data);navigate('/client');}else{setError(data.message);}}catch(err){console.log('Ошибка входа: неверный логин или пароль');setError('Ошибка входа: неверный логин или пароль');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",style:{display:\"flex\",flexDirection:\"column\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"img\",{src:logo1298,className:\"logo\",alt:\"logo\",style:{width:'200px'}}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\u041A\\u043B\\u0430\\u0441\\u0441\\u043D\\u044B\\u0439 \\u043F\\u043E\\u043C\\u043E\\u0449\\u043D\\u0438\\u043A \",/*#__PURE__*/_jsx(\"br\",{}),\"\\u0428\\u043A\\u043E\\u043B\\u0430 \\u21161298 \"]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"E-mail:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",value:email,onChange:e=>setEmail(e.target.value),required:true,style:{width:'300px'}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",value:password,onChange:e=>setPassword(e.target.value),required:true,style:{width:'300px'}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"button-group\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{width:'160px',marginBottom:'20px'},children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})}),/*#__PURE__*/_jsx(\"span\",{onClick:()=>navigate('/register'),style:{textAlign:'center',color:\"white\",marginTop:'20px',textDecoration:'underline'},children:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"}),error.length>0&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'8px',textAlign:'center',color:'red'},children:error})]})]});}export default LoginForm;","map":{"version":3,"names":["React","useContext","useState","login","logo1298","useNavigate","axios","UserId","jsx","_jsx","jsxs","_jsxs","LoginForm","navigate","email","setEmail","password","setPassword","error","setError","setAuth","handleSubmit","e","preventDefault","data","user","id","token","access_token","console","log","message","err","className","style","display","flexDirection","alignItems","children","src","alt","width","onSubmit","htmlFor","type","value","onChange","target","required","marginBottom","onClick","textAlign","color","marginTop","textDecoration","length"],"sources":["C:/Users/kir/WebstormProjects/childout/src/pages/LoginPage.js"],"sourcesContent":["import React, {useContext, useState} from \"react\";\r\nimport './LoginPage.css'\r\nimport {login} from \"./services/authService\";\r\nimport logo1298 from '../assets/logo1298.svg'\r\nimport {useNavigate} from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport {UserId} from \"../App\";\r\nfunction LoginForm() {\r\n    const navigate = useNavigate();\r\n\r\n\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [error, setError] = useState('');\r\n    const { setAuth } = useContext(UserId);\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const data = await login(email, password);\r\n            if (data.user){\r\n                setAuth({ id: data.user.id, token: data.user.access_token });\r\n                console.log(data);\r\n                navigate('/client');\r\n            }\r\n            else{\r\n                setError(data.message);\r\n            }\r\n\r\n        } catch (err) {\r\n            console.log('Ошибка входа: неверный логин или пароль')\r\n            setError('Ошибка входа: неверный логин или пароль');\r\n        }\r\n    };\r\n    return (\r\n        <div className=\"login-container\" style={{display:\"flex\", flexDirection:\"column\", alignItems:\"center\"}}>\r\n            <img src={logo1298} className=\"logo\" alt=\"logo\" style={{width:'200px'}}/>\r\n            <h2>Классный помощник <br/>Школа №1298 </h2>\r\n            <form onSubmit={handleSubmit}>\r\n                <div className=\"input-group\">\r\n                    <label htmlFor=\"email\">E-mail:</label>\r\n                    <input\r\n                        type=\"email\"\r\n                        id=\"email\"\r\n                        value={email}\r\n                        onChange={(e) => setEmail(e.target.value)}\r\n                        required\r\n                        style={{width:'300px'}}\r\n                    />\r\n                </div>\r\n                <div className=\"input-group\">\r\n                    <label htmlFor=\"password\">Пароль:</label>\r\n                    <input\r\n                        type=\"password\"\r\n                        id=\"password\"\r\n                        value={password}\r\n                        onChange={(e) => setPassword(e.target.value)}\r\n                        required\r\n                        style={{width:'300px'}}\r\n                    />\r\n                </div>\r\n                <div className=\"button-group\">\r\n                    <button type=\"submit\"  style={{width:'160px', marginBottom:'20px'}}>Войти</button>\r\n                </div>\r\n                <span onClick={()=>navigate('/register')} style={{textAlign:'center', color:\"white\", marginTop:'20px', textDecoration:'underline'}}>Регистрация</span>\r\n                {error.length>0&&<div style={{marginTop:'8px',textAlign:'center', color:'red'}}>{error}</div>}\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\nexport default LoginForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}